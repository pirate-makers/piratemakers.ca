<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Prune">
<meta name="description" content="Welcome to the Kafka Operator (Magical) Mystery tour ! I’m sure the Beatles would have rebranded the song if they were still here to see how BanzaiCloud team finally rocked the Kafka Operator world !
They also did a good job of branding it, so I won’t dive into “why this another Kafka Operator is better than the others”. I can assure it is !
Just check :
https://banzaicloud.com/products/kafka-operator/ https://banzaicloud." />
<meta name="keywords" content="blog,developer,personal,cnc,shapeoko,maker,pirate,hacker,go,golang,devops,gitops, devops, pubsub, kubernetes" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/" />


    <title>
        
            BanzaiCloud Kafka Operator tour :: Pirate Makers 
        
    </title>





<link rel="stylesheet" href="https://piratemakers.ca/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css" integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE=">


    
        <link rel="stylesheet" type="text/css" href="https://piratemakers.ca/css/custom.css">
    


    <link rel="apple-touch-icon" sizes="180x180" href="https://piratemakers.ca/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://piratemakers.ca/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://piratemakers.ca/favicon-16x16.png">
    <link rel="manifest" href="https://piratemakers.ca/site.webmanifest">
    <link rel="mask-icon" href="https://piratemakers.ca/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="https://piratemakers.ca/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="BanzaiCloud Kafka Operator tour">
<meta itemprop="description" content="Welcome to the Kafka Operator (Magical) Mystery tour ! I’m sure the Beatles would have rebranded the song if they were still here to see how BanzaiCloud team finally rocked the Kafka Operator world !
They also did a good job of branding it, so I won’t dive into “why this another Kafka Operator is better than the others”. I can assure it is !
Just check :
https://banzaicloud.com/products/kafka-operator/ https://banzaicloud."><meta itemprop="datePublished" content="2019-10-01T19:29:00+00:00" />
<meta itemprop="dateModified" content="2023-12-01T14:31:59-05:00" />
<meta itemprop="wordCount" content="2018"><meta itemprop="image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/1.png" /><meta itemprop="image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/2.png" /><meta itemprop="image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/3.png" /><meta itemprop="image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/4.png" />
<meta itemprop="keywords" content="devops,pubsub,kubernetes," />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/1.png" /><meta name="twitter:title" content="BanzaiCloud Kafka Operator tour"/>
<meta name="twitter:description" content="Welcome to the Kafka Operator (Magical) Mystery tour ! I’m sure the Beatles would have rebranded the song if they were still here to see how BanzaiCloud team finally rocked the Kafka Operator world !
They also did a good job of branding it, so I won’t dive into “why this another Kafka Operator is better than the others”. I can assure it is !
Just check :
https://banzaicloud.com/products/kafka-operator/ https://banzaicloud."/>



    <meta property="og:title" content="BanzaiCloud Kafka Operator tour" />
<meta property="og:description" content="Welcome to the Kafka Operator (Magical) Mystery tour ! I’m sure the Beatles would have rebranded the song if they were still here to see how BanzaiCloud team finally rocked the Kafka Operator world !
They also did a good job of branding it, so I won’t dive into “why this another Kafka Operator is better than the others”. I can assure it is !
Just check :
https://banzaicloud.com/products/kafka-operator/ https://banzaicloud." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/" /><meta property="og:image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/1.png" /><meta property="og:image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/2.png" /><meta property="og:image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/3.png" /><meta property="og:image" content="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/images/4.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-10-01T19:29:00+00:00" />
<meta property="article:modified_time" content="2023-12-01T14:31:59-05:00" />







    <meta property="article:published_time" content="2019-10-01 19:29:00 &#43;0000 UTC" />











    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://piratemakers.ca/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">&gt;</span>
            <span class="logo__text ">
                Pirate Makers</span>
            <span class="logo__cursor" style=
                  "visibility:hidden;
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://piratemakers.ca/posts/">Blog</a></li><li><a href="https://piratemakers.ca/about/">About</a></li><li><a href="https://piratemakers.ca/tags">Tags</a></li>
        <div class="submenu">
            <li class="dropdown">
                <a href="javascript:void(0)" class="dropbtn">en</a>
                <div class="dropdown-content">
                    
                        
                    
                </div>
            </li>
        </div>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        10 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-tour/">BanzaiCloud Kafka Operator tour</a>
      </h1>

      

      

      

      <div class="post-content">
        <p><img src="images/1.png#layoutTextWidth" alt="image"></p>
<h3 id="welcome-to-the-kafka-operator-magical-mystery-tour-">Welcome to the Kafka Operator (Magical) Mystery tour !</h3>
<p>I’m sure the Beatles would have rebranded the song if they were still here to see how BanzaiCloud team finally rocked the Kafka Operator world !</p>
<p>They also did a good job of branding it, so I won’t dive into “why this another Kafka Operator is better than the others”. I can assure it is !<br>
Just check :</p>
<ul>
<li><a href="https://banzaicloud.com/products/kafka-operator/">https://banzaicloud.com/products/kafka-operator/</a></li>
<li><a href="https://banzaicloud.com/blog/kafka-operator/">https://banzaicloud.com/blog/kafka-operator/</a></li>
<li><a href="https://github.com/banzaicloud/kafka-operator">https://github.com/banzaicloud/kafka-operator</a></li>
</ul>
<p>EDIT : also check my other article for <a href="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-and-broker-autoscaling/">Kafka cluster autoscaling</a></p>
<h3 id="overview">Overview</h3>
<p>Few days ago BanzaiCloud released the 0.6.x version of the Operator, with :</p>
<ul>
<li>rolling updates</li>
<li>Topic management</li>
<li>User management</li>
</ul>
<p>I think the operator is now on par with all others in term of features, not counting everything it’s adding to it.</p>
<p>New release, new API, lots of changes… things break during Upgrade :)</p>
<p>I just want to quickly post how to build your config (with example) to help you bootstrap your cluster quickly.</p>
<p>It is also great to get a look at the sample config found in the Git repo : <a href="https://raw.githubusercontent.com/banzaicloud/kafka-operator/master/config/samples/banzaicloud_v1beta1_kafkacluster.yaml">https://raw.githubusercontent.com/banzaicloud/kafka-operator/master/config/samples/banzaicloud_v1beta1_kafkacluster.yaml</a></p>
<p>Note that I’m not part of BanzaiCloud and I don’t get any advantage whatsoever by publishing this post.</p>
<h3 id="kafka-operator">Kafka Operator</h3>
<p><img src="images/2.png#layoutTextWidth" alt="image"></p>
<p>Operator talks to the API server and watch for <code>kafkacluster</code> Resource. It also talks to <a href="https://github.com/linkedin/cruise-control">CruiseControl</a>, a Java application from Linkedin which is <em>“a general-purpose system that continually monitors our clusters and automatically adjusts the resources allocated to them to meet pre-defined performance goals”.</em> Finally it “talks to” Prometheus, watch for alerts and take actions.</p>
<p>BanzaiCloud provides a Helm Chart (as too many others out there), so let’s use it. As I don’t use <code>Tiller</code>, I just use<code>helm template</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/banzaicloud/kafka-operator.git
</span></span><span style="display:flex;"><span>cd kafka-operator
</span></span><span style="display:flex;"><span>helm template charts/kafka-operator <span style="color:#ae81ff">\ </span> 
</span></span><span style="display:flex;"><span>--set fullnameOverride<span style="color:#f92672">=</span>kafka <span style="color:#ae81ff">\ </span> 
</span></span><span style="display:flex;"><span>--set prometheus.enabled<span style="color:#f92672">=</span>false <span style="color:#ae81ff">\ </span> 
</span></span><span style="display:flex;"><span>--set prometheusMetrics.authProxy.enabled<span style="color:#f92672">=</span>false <span style="color:#ae81ff">\ </span> 
</span></span><span style="display:flex;"><span>--set operator.image.repository<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt; private repo &gt;/kafka-operator&#34;</span> <span style="color:#ae81ff">\ </span> 
</span></span><span style="display:flex;"><span>--set operator.image.tag<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.6.1&#34;</span> <span style="color:#ae81ff">\ </span> 
</span></span><span style="display:flex;"><span>--set prometheus.server.configMapOverrideName<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#ae81ff">\ </span> 
</span></span><span style="display:flex;"><span>--set imagePullSecrets<span style="color:#f92672">={</span>docker-images-registry-secret<span style="color:#f92672">}</span> <span style="color:#ae81ff">\ </span> 
</span></span><span style="display:flex;"><span>--namespace tools &gt; charts/kafka-operator/generated.yaml
</span></span><span style="display:flex;"><span>kubectl apply -n tools  charts/kafka-operator/generated.yaml
</span></span></code></pre></div><p>You should have a running kafka operator now. Check using <code>kubectl</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl -n tools get pods  
</span></span><span style="display:flex;"><span>NAME                             READY   STATUS    RESTARTS   AGE  
</span></span><span style="display:flex;"><span>kafka-operator-85b894b8c4-wjmt7  1/1     Running   <span style="color:#ae81ff">0</span>          28m
</span></span></code></pre></div><p><strong>Note</strong> : I wasn’t able to upgrade from 0.5 to 0.6 version. The CRD namespace switched from <a href="http://kafkaclusters.banzaicloud.banzaicloud.io/"><em>kafkaclusters.</em><strong><em>banzaicloud</em></strong><em>.banzaicloud</em>.io</a> to <a href="http://kafkaclusters.kafka.banzaicloud.io/"><em>kafkaclusters.</em><strong><em>kafka</em></strong><em>.banzaicloud.io</em></a>.<br>
Also, when deleting the old deployment I saw my Kafka pods deleted, removing the cluster once and for all.</p>
<p>In theory, it SHOULD have worked… a bit… It should have grow my cluster to a 6 node cluster, sync, and I should have been able to remove the old one.</p>
<p><strong>Note 2 :</strong> There was a bug in 0.6.0 (corrected in 0.6.1, I haven’t tested though) where you <em>HAD</em> to use Kafka Brokers ID starting at 0 (0, 1 and 2 for a 3 node cluster)</p>
<p>My best guess was to destroy everything. If I was on a prod system, I think I would have backuped my data, rebuild a new cluster then re-import the data.#### Destroying everything</p>
<p>Delete your Operator deployment : <code>kubectl -n tools delete deployment kafka-operator</code></p>
<p>This should take care of all the pods, PVC… you may have to manually delete your PVs.</p>
<p>Then delete everything in Zookeeper. This is needed if you change Kafka version or Broker IDs. Do not do this on Production !!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl exec -ti  zk-zookeeper-0 bin/zkCli.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>deleteall /admin  
</span></span><span style="display:flex;"><span>deleteall /brokers  
</span></span><span style="display:flex;"><span>deleteall /cluster  
</span></span><span style="display:flex;"><span>deleteall /config  
</span></span><span style="display:flex;"><span>deleteall /consumers  
</span></span><span style="display:flex;"><span>deleteall /controller_epoch  
</span></span><span style="display:flex;"><span>deleteall /isr_change_notification  
</span></span><span style="display:flex;"><span>deleteall /kafka-manager  
</span></span><span style="display:flex;"><span>deleteall /latest_producer_id_block  
</span></span><span style="display:flex;"><span>deleteall /log_dir_event_notification
</span></span></code></pre></div><h3 id="kafkacluster">KafkaCluster</h3>
<p>The KafkaCluster CRD have changed A LOT from 0.5.x to 0.6.x.<br>
So much that it’s not compatible AT ALL !</p>
<p>I’m not going to point out the changes. Most of you don’t have a 0.5 running, so just start with a 0.6 spec.<br>
I’m going to break down in may parts as it’s quite a huge spec…</p>
<p>This is for a 3 nodes cluster named kf-kafka, using Zookeeper on port 2181 in the same namespace (alerting).</p>
<h4 id="global-spec">Global spec</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">kafka.banzaicloud.io/v1beta1  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">KafkaCluster  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">controller-tools.k8s.io</span>: <span style="color:#e6db74">&#34;1.0&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kafka_cr</span>: <span style="color:#ae81ff">kf-kafka  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">kf-kafka  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">alerting  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">headlessServiceEnabled</span>: <span style="color:#66d9ef">false</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">zkAddresses</span>:  
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;zk-zookeeper:2181&#34;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rackAwareness</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">labels</span>:  
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;failure-domain.beta.kubernetes.io/region&#34;</span>  
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;failure-domain.beta.kubernetes.io/zone&#34;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">oneBrokerPerNode</span>: <span style="color:#66d9ef">false</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">clusterImage</span>: <span style="color:#e6db74">&#34;your-own-repo/kafka:2.3.0.7&#34;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rollingUpgradeConfig</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">failureThreshold</span>: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p><strong>headlessServiceEnabled</strong> tells to create a headless service for Kafka brokers discovery. This is the “old fashion” way, as other Operators or Helm charts do. It’s a <code>service</code> without any IP, where the DNS is configured to give you all the names of the pods that are part of the service selector.</p>
<p>Ex with my old cluster :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nslookup kf-broker-kafka
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Name:      kf-broker-kafka  
</span></span><span style="display:flex;"><span>Address 1: 10.2.128.124 kf-kafka-1.kf-broker-kafka.alerting.svc.cluster.local  
</span></span><span style="display:flex;"><span>Address 2: 10.2.128.254 kf-kafka-0.kf-broker-kafka.alerting.svc.cluster.local  
</span></span><span style="display:flex;"><span>Address 3: 10.2.129.225 kf-kafka-2.kf-broker-kafka.alerting.svc.cluster.local
</span></span></code></pre></div><p>Setting it to False will not create the Headless Service. You don’t usually need it so set it to <strong>False</strong>.</p>
<p>With the Operator, you will end up with two services :</p>
<ul>
<li><!-- raw HTML omitted -->-all-broker (kf-kafka-all-broker) : a ClusterIP service which point to all your cluster Instances. You can use it to bootstrap your clients.</li>
<li><!-- raw HTML omitted -->-<!-- raw HTML omitted --> (kf-kafka-0, kf-kafka-1, kf-kafka-2) : one service per Broker. This is used internally by Kafka Brokers to talk to each other, or if you want to give the full list of brokers when bootstrapping.
<img src="images/3.png#layoutTextWidth" alt="image"></li>
</ul>
<p><strong>oneBrokerPerNode</strong>, when enabled, will put one broker on each node, NOT MORE. Meaning if you have a 2 node cluster and create a 3 broker Kafka cluster, one of the brokers will <strong>NEVER</strong> be scheduled.</p>
<p>While it’s a good option to set to ensure reliability of the cluster, you may end up with unschedulable brokers, and a broken cluster. It’s sometimes better to have two brokers on the same node instead of a broken cluster… Affinity is also set on the pods by default, so Kubernetes should be able to handle it himself. Keep this option to <strong>False</strong>.</p>
<p><strong>rollingUpgradeConfig</strong> tels how many brokers can be broken at a time… another way of seeing it is “how many brokers I can rolling upgrade in parallel”. Keep it to <strong>1</strong> for a 3 node cluster, and increase it depending on your broker count and replication factor.</p>
<h4 id="brokerconfiggroups">brokerConfigGroups</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">brokerConfigGroups</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Specify desired group name (eg., &#39;default_group&#39;)  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">default_group</span>:  
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># all the brokerConfig settings are available here  </span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">serviceAccountName</span>: <span style="color:#e6db74">&#34;kf-kafka&#34;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">imagePullSecrets</span>:  
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">docker-images-registry  </span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">kafkaJvmPerfOpts</span>: <span style="color:#e6db74">&#34;-server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:+ExplicitGCInvokesConcurrent -Djava.awt.headless=true -Dsun.net.inetaddr.ttl=60 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Djava.rmi.server.hostname=${HOSTNAME} -Dcom.sun.management.jmxremote.rmi.port=9099&#34;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">storageConfigs</span>:  
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">mountPath</span>: <span style="color:#e6db74">&#34;/kafka-logs&#34;</span>  
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">pvcSpec</span>:  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">accessModes</span>:  
</span></span><span style="display:flex;"><span>              - <span style="color:#ae81ff">ReadWriteOnce  </span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">storageClassName</span>: <span style="color:#ae81ff">ssd  </span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">resources</span>:  
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">requests</span>:  
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">storage</span>: <span style="color:#ae81ff">30Gi</span>
</span></span></code></pre></div><p>This is a way to configure some Broker config templates that you will use to create your brokers. The broker config (see later) will have precedence on what is defined here. See it as some defaults so your broker definition is smaller :)</p>
<h4 id="brokers">Brokers</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">brokers</span>:  
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">id</span>:  <span style="color:#ae81ff">0</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">brokerConfigGroup</span>: <span style="color:#e6db74">&#34;default_group&#34;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">brokerConfig</span>:  
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">resourceRequirements</span>:  
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">limits</span>:  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#e6db74">&#34;3Gi&#34;</span>  
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">requests</span>:  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">cpu</span>: <span style="color:#e6db74">&#34;0.3&#34;</span>  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#e6db74">&#34;512Mi&#34;</span>  
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">id</span>:  <span style="color:#ae81ff">1</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">brokerConfigGroup</span>: <span style="color:#e6db74">&#34;default_group&#34;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">brokerConfig</span>:  
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">resourceRequirements</span>:  
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">limits</span>:  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#e6db74">&#34;3Gi&#34;</span>  
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">requests</span>:  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">cpu</span>: <span style="color:#e6db74">&#34;0.3&#34;</span>  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#e6db74">&#34;512Mi&#34;</span>  
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">id</span>:  <span style="color:#ae81ff">2</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">brokerConfigGroup</span>: <span style="color:#e6db74">&#34;default_group&#34;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">brokerConfig</span>:  
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">resourceRequirements</span>:  
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">limits</span>:  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#e6db74">&#34;3Gi&#34;</span>  
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">requests</span>:  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">cpu</span>: <span style="color:#e6db74">&#34;0.3&#34;</span>  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#e6db74">&#34;512Mi&#34;</span>
</span></span></code></pre></div><p>Thanks to the BrokerConfigGroup, this part is really light.<br>
I kept the resources defined in each Broker so I can tune them up… while I see no reasons to have them not being the same for most people…<br>
You can see I did NOT set <code>limits.cpu</code> parameter… this is due to the <a href="https://github.com/kubernetes/kubernetes/issues/67577#issuecomment-534866275">CFS Quota bug</a> that is not patched on Azure, which will Throttle some of your pods even if they don’t use any CPU…</p>
<h4 id="config"><strong>Config</strong></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e">#clusterWideConfig: |  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#  background.threads=2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">readOnlyConfig</span>: <span style="color:#ae81ff">|  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">offsets.topic.replication.factor=2  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">default.replication.factor=2  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">transaction.state.log.min.isr=1  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">log.dirs=/kafka-logs/data  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">delete.topic.enable=true  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">num.partitions=32  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">auto.create.topics.enable=false  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">transaction.state.log.replication.factor=2</span>
</span></span></code></pre></div><p>You now have to set your config parameters in different components. This is due to the Rolling Upgrade feature : the operator needs to know between a change in read-only options (which require a node restart) and user options.<br>
You can read more here : <a href="https://kafka.apache.org/documentation/#dynamicbrokerconfigs">https://kafka.apache.org/documentation/#dynamicbrokerconfigs</a></p>
<h4 id="listeners">Listeners</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">listenersConfig</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">internalListeners</span>:  
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#34;plaintext&#34;</span>  
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;plaintext&#34;</span>  
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">9092</span>  
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">usedForInnerBrokerCommunication</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>Nothing to tell here… you will have a lot more stuff here if you use SSL…</p>
<h4 id="cruisecontrol">CruiseControl</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">cruiseControlConfig</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#e6db74">&#34;solsson/kafka-cruise-control:latest&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">serviceAccountName</span>: <span style="color:#e6db74">&#34;kf-kafka&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">config</span>: <span style="color:#ae81ff">|  </span>
</span></span><span style="display:flex;"><span>...  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">capacityConfig</span>: <span style="color:#ae81ff">|  </span>
</span></span><span style="display:flex;"><span>      {  
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;brokerCapacities&#34;</span>:[  
</span></span><span style="display:flex;"><span>          {  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;brokerId&#34;: </span><span style="color:#e6db74">&#34;-1&#34;</span>,  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;capacity&#34;: </span>{  
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;DISK&#34;: </span><span style="color:#e6db74">&#34;200000&#34;</span>,  
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;CPU&#34;: </span><span style="color:#e6db74">&#34;100&#34;</span>,  
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;NW_IN&#34;: </span><span style="color:#e6db74">&#34;50000&#34;</span>,  
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&#34;NW_OUT&#34;: </span><span style="color:#e6db74">&#34;50000&#34;</span>  
</span></span><span style="display:flex;"><span>            },  
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;doc&#34;: </span><span style="color:#e6db74">&#34;This is the default capacity. Capacity unit used for disk is in MB, cpu is in percentage, network throughput is in KB.&#34;</span>  
</span></span><span style="display:flex;"><span>          }  
</span></span><span style="display:flex;"><span>        ]  
</span></span><span style="display:flex;"><span>      }  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">clusterConfigs</span>: <span style="color:#ae81ff">|  </span>
</span></span><span style="display:flex;"><span>      {  
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;min.insync.replicas&#34;: </span><span style="color:#ae81ff">2</span>  
</span></span><span style="display:flex;"><span>      }
</span></span></code></pre></div><p>Again, not much difficulties here… Define your own Broker Capacities, specifically the DISK parameter if your cluster use a larger disk than the small default, this will help CC (CruiseControl) to build it’s alarms.</p>
<p>the “…” is a LONG list of options… I kept the defaults for now.</p>
<h4 id="monitoring">Monitoring</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">monitoringConfig</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># jmxImage describes the used prometheus jmx exporter agent container  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">jmxImage</span>: <span style="color:#e6db74">&#34;banzaicloud/jmx-javaagent:0.12.0&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># pathToJar describes the path to the jar file in the given image  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">pathToJar</span>: <span style="color:#e6db74">&#34;/opt/jmx_exporter/jmx_prometheus_javaagent-0.12.0.jar&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># kafkaJMXExporterConfig describes jmx exporter config for Kafka  </span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kafkaJMXExporterConfig</span>: <span style="color:#ae81ff">|  </span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">lowercaseOutputName</span>: <span style="color:#66d9ef">true</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">rules</span>:
</span></span></code></pre></div><p>This is used to add the needed jars and set up the JMX Exporter for Prometheus. Add your own rules or leave the defaults…</p>
<p>Now you should have a perfect Kafka Cluster running !!</p>
<p>You can see my full config <a href="https://gist.github.com/prune998/7976be90e04b9f61a04976860b124c73">here</a>.</p>
<h3 id="kafka-topics">Kafka Topics</h3>
<p>This is a new addition to this Operator. You can now upload some <code>kafkatopic</code> manifests and create / delete topics.</p>
<p><img src="images/4.png#layoutTextWidth" alt="image"></p>
<p>As of 0.6.0 / 0.6.1, this feature use a Kubernates Validating Webhook to ensure the manifest is well formated. For that to work, two other pieces have to be installed in your cluster : Cert-Manager and CAInjecter (both from the Cert-Manager project from JetStack).</p>
<p>Cert-Manager will create an SSL Certificate, and CA-Inject will provide it to the K8s API so it is authorized to call the Kafka Operator Webhook.</p>
<h4 id="cert-manager">Cert-Manager</h4>
<p>To install it, if you don’t already have it, use the Helm Chart !! If you are using an old version, re-install. Ca-Injector is a new addition and needs to be installed. Check with :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get pods -n cert-manager
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME                                       READY   STATUS    RESTARTS   AGE  
</span></span><span style="display:flex;"><span>cert-manager-c76c4dbfd-nvf4v               1/1     Running   <span style="color:#ae81ff">0</span>          20h  
</span></span><span style="display:flex;"><span>cert-manager-cainjector-55f87f5c76-ndhjv   1/1     Running   <span style="color:#ae81ff">0</span>          20h
</span></span></code></pre></div><p>If you need to install :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm fetch --untar --untardir . jetstack/cert-manager
</span></span><span style="display:flex;"><span>helm template  
</span></span><span style="display:flex;"><span>        --name cert-manager  
</span></span><span style="display:flex;"><span>        --set global.imagePullSecrets<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span>.name<span style="color:#f92672">=</span>docker-images-registry  
</span></span><span style="display:flex;"><span>        --set webhook.enabled<span style="color:#f92672">=</span>false  
</span></span><span style="display:flex;"><span>        --set image.repository<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;private repo&gt;/certmanager&#34;</span>  
</span></span><span style="display:flex;"><span>        --set image.tag<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;v0.10.1&#34;</span>  
</span></span><span style="display:flex;"><span>        --set cainjector.image.repository<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;private repo&gt;/certmanager-cainjector&#34;</span>  
</span></span><span style="display:flex;"><span>        --set cainjector.image.tag<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;v0.10.1&#34;</span>  
</span></span><span style="display:flex;"><span>        --set cainjector.enabled<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span>  
</span></span><span style="display:flex;"><span>        --namespace cert-manager  
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;./cert-manager&#39;</span> &gt; certmanager-generated.yaml
</span></span><span style="display:flex;"><span>kubectl apply -n cert-manager -f certmanager-generated.yaml
</span></span></code></pre></div><p>It’s as simple as that. Of course, you may have tons of problems with Helm, as I usually do… I call it “Hellm”… I’m a hater, or, right :)</p>
<p>You can check the Validating Webhook to ensure it was provided with a valid Certificate :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get validatingwebhookconfiguration kafka-operator-validating-webhook -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{[&#39;webhooks&#39;][0][&#39;clientConfig&#39;][&#39;caBundle&#39;]}&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>LS0tLS1VeryLongStringWithBase64BitOfTheSSLCertificateWhichIRemovedSoItWontMakeThisArticleEvenHardToReadLS0tCg<span style="color:#f92672">==</span>
</span></span></code></pre></div><h4 id="kafkatopic">KafkaTopic</h4>
<p>The final part in the Cluster creations, the topic(s) !</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>---  
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">kafka.banzaicloud.io/v1alpha1  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">KafkaTopic  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">compactedtopic  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">alerting  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">clusterRef</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">kf-kafka  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">compactedtopic  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">partitions</span>: <span style="color:#ae81ff">8</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicationFactor</span>: <span style="color:#ae81ff">2</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">config</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">segment.bytes</span>: <span style="color:#e6db74">&#34;104857600&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">delete.retention.ms</span>: <span style="color:#e6db74">&#34;8640000&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">retention.ms</span>: <span style="color:#e6db74">&#34;259200000&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">cleanup.policy</span>: <span style="color:#e6db74">&#34;compact&#34;</span>  
</span></span><span style="display:flex;"><span>---  
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">kafka.banzaicloud.io/v1alpha1  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">KafkaTopic  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">regulartopic  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">alerting  </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">clusterRef</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">kf-kafka  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">regulartopic  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">partitions</span>: <span style="color:#ae81ff">128</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicationFactor</span>: <span style="color:#ae81ff">2</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">config</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">segment.bytes</span>: <span style="color:#e6db74">&#34;104857600&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">delete.retention.ms</span>: <span style="color:#e6db74">&#34;864000&#34;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">retention.ms</span>: <span style="color:#e6db74">&#34;259200000&#34;</span>
</span></span></code></pre></div><p>What you see here is the YAML for 2 topics, one compacted, the other one regular. Topics will be created in the cluster <code>kf-kafka</code>.</p>
<p>It’s pretty straightforward… just apply it…</p>
<p><strong>Note</strong> : For now, the Operator can create a topic and delete a topic it manages. If you create a topic then delete it “by hand”, the Operator will log some errors about it.<br>
While this Topic Management is quite new, everything is not yet decided or implemented. I’ve created a PR to track this issue : <a href="https://github.com/banzaicloud/kafka-operator/issues/158">https://github.com/banzaicloud/kafka-operator/issues/158</a></p>
<h3 id="conclusion">Conclusion</h3>
<p>This is a long and ugly post, with almost no images, about the BanzaiCloud Kafka Operator. With that you should be able to start using it without the pitfalls I was trapped in.<br>
More docs and more features are coming so I don’t know for how long this post will be relevant. I’ll try to keep up :)</p>
<p>Remember this Operator is still new, at 0.x versions, and that the API may change quite a bit until 1.0 is released. Except that, I’m pretty confident on the stability and I’m about to deploy it everywhere up to production (to replace Strimzi and Statefulsets)!</p>
<p>I want to thank the people on the Slack Channel who helped me through this, Balint and Tinyzimmer (who also added the topic/user management).<br>
I also thank BanzaiCloud team for their work, and, oh, I used some of your pictures from your blog/website to illustrate… hope you don’t mind ?</p>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://piratemakers.ca/tags/devops/">devops</a></span>
        <span class="tag"><a href="https://piratemakers.ca/tags/pubsub/">pubsub</a></span>
        <span class="tag"><a href="https://piratemakers.ca/tags/kubernetes/">kubernetes</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        2018 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2019-10-01 15:29
        

         
          
            
              (Last updated: 2023-12-01 14:31)
            
          
        
      </p>
        <p>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit">
            <circle cx="12" cy="12" r="4"></circle>
            <line x1="1.05" y1="12" x2="7" y2="12"></line>
            <line x1="17.01" y1="12" x2="22.96" y2="12"></line>
          </svg>

          <a href="1ab993c2d9f5b7b58edda6893280e093b620e8db" target="_blank" rel="noopener">1ab993c</a>
          @ 2023-12-01
        </p>
    </div>
      <hr />
      <div class="sharing-buttons">
        
<a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f" target="_blank" rel="noopener" aria-label="" title="Share on facebook">
  <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f" target="_blank" rel="noopener" aria-label="" title="Share on twitter">
  <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
      <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title=BanzaiCloud%20Kafka%20Operator%20tour&amp;caption=BanzaiCloud%20Kafka%20Operator%20tour&amp;canonicalUrl=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f" target="_blank" rel="noopener" aria-label="" title="Share on tumblr">
  <div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small">
    <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.563 24c-5.093 0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941 0 9.999 0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.4 1.374-4.156 1.404h-.178l.011.002z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="mailto:?subject=BanzaiCloud%20Kafka%20Operator%20tour&amp;body=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f" target="_self" rel="noopener" aria-label="" title="Share via email">
  <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f&amp;media=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f;description=BanzaiCloud%20Kafka%20Operator%20tour" target="_blank" rel="noopener" aria-label="" title="Share on pinterest">
  <div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f&amp;title=BanzaiCloud%20Kafka%20Operator%20tour&amp;summary=BanzaiCloud%20Kafka%20Operator%20tour&amp;source=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f" target="_blank" rel="noopener" aria-label="" title="Share on linkedin">
  <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f&amp;resubmit=true&amp;title=BanzaiCloud%20Kafka%20Operator%20tour" target="_blank" rel="noopener" aria-label="" title="Share on reddit">
  <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.xing.com/app/user?op=share;url=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f;title=BanzaiCloud%20Kafka%20Operator%20tour" target="_blank" rel="noopener" aria-label="" title="Share on xing">
  <div class="resp-sharing-button resp-sharing-button--xing resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M18.188 0c-.517 0-.741.325-.927.66 0 0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211 0 .375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016 0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894 0 21.686 0h-3.498zM3.648 4.74c-.211 0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016 0 .021L1.86 16.051c-.099.188-.093.381 0 .529.085.142.239.234.45.234h3.461c.518 0 .766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="whatsapp://send?text=BanzaiCloud%20Kafka%20Operator%20tour%20https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f" target="_blank" rel="noopener" aria-label="" title="Share on whatsapp">
  <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f&amp;t=BanzaiCloud%20Kafka%20Operator%20tour" target="_blank" rel="noopener" aria-label="" title="Share on hacker news">
  <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://telegram.me/share/url?text=BanzaiCloud%20Kafka%20Operator%20tour&amp;url=https%3a%2f%2fpiratemakers.ca%2fposts%2f2019%2f10%2fbanzaicloud-kafka-operator-tour%2f" target="_blank" rel="noopener" aria-label="" title="Share on telegram">
  <div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
    </div>
  </div>
</a>

      </div>

    
    <div class="pagination">
        

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://piratemakers.ca/posts/2019/10/banzaicloud-kafka-operator-and-broker-autoscaling/">
                    <span class="button__icon">←</span>
                    <span class="button__text">Banzaicloud Kafka Operator and Broker AutoScaling</span>
                </a>
            </span>
            

            
            <span class="button next">
                <a href="https://piratemakers.ca/posts/2019/06/using-jsonnet-does-not-have-to-be-complex/">
                    <span class="button__text">Using Jsonnet does not have to be complex</span>
                    <span class="button__icon">→</span>
                </a>
            </span>
            
        </div>
    </div>


    
      
        <div id="comments">
          <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "piratemakers-ca" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
      
    

    

    

  </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2023</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span><a href="https://piratemakers.ca/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
            <span>Pirate Makers™</span>
        </div>
    </div>
    
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
        </div>
    </div>
    
</footer>

            
        </div>

        



<script type="text/javascript" src="https://piratemakers.ca/bundle.min.46e438bd2eca7eb6358c700b40f6f56b22ab0b92503ecc11a2d8e4bcc610b8b4da83e5ea3d3e84fdb5f3c3c765744b9f5bbaf43cf5a027910be07ee39a9c12a1.js" integrity="sha512-RuQ4vS7KfrY1jHALQPb1ayKrC5JQPswRotjkvMYQuLTag&#43;XqPT6E/bXzw8dldEufW7r0PPWgJ5EL4H7jmpwSoQ=="></script>




    </body>
</html>
